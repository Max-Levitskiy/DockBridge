# DockBridge Client Configuration
# This file contains default configuration for the DockBridge client
# Configuration files are loaded from ~/.dockbridge/configs/ by default

# Hetzner Cloud configuration
hetzner:
  # API token for Hetzner Cloud (can also be set via HETZNER_API_TOKEN env var)
  api_token: ""
  
  # Server type to provision (see Hetzner Cloud documentation for available types)
  server_type: "cpx21"
  
  # Location/datacenter for the server
  location: "fsn1"
  
  # Volume size in GB (minimum 10, maximum 10000)
  volume_size: 10
  
  # Preferred images in order of preference (first available will be used)
  # docker-ce: Docker pre-installed image (faster startup, ~2-3 minutes)
  # ubuntu-22.04: Standard Ubuntu image with Docker installation (~5-7 minutes)
  preferred_images:
    - "docker-ce"
    - "ubuntu-22.04"

# Docker configuration
docker:
  # Path to Docker socket
  socket_path: "/var/run/docker.sock"
  
  # Port for Docker proxy to listen on
  proxy_port: 2376

# Keep-alive configuration
keepalive:
  # Interval between heartbeat messages
  interval: "30s"
  
  # Timeout before server self-destructs without heartbeat
  timeout: "5m"
  
  # Interval between retry attempts
  retry_interval: "5s"
  
  # Maximum number of retry attempts
  max_retries: 3

# Activity tracking and timeout configuration
activity:
  # Idle timeout - server destroyed after this period of no Docker commands
  idle_timeout: "5m"
  
  # Connection timeout - server destroyed after this period of no active connections
  connection_timeout: "30m"
  
  # Grace period before server destruction (allows cancellation)
  grace_period: "30s"

# SSH configuration
ssh:
  # Path to SSH private key (will be generated if doesn't exist)
  key_path: "~/.dockbridge/ssh/id_rsa"
  
  # SSH port
  port: 22
  
  # SSH connection timeout
  timeout: "30s"
  
  # SSH keep-alive interval
  keep_alive: "30s"

# Logging configuration
logging:
  # Log level: debug, info, warn, error, fatal
  level: "info"
  
  # Log format: json, text
  format: "json"
  
  # Log output: stdout, stderr, or file path
  output: "stdout"

# Port forwarding configuration
port_forward:
  # Enable automatic port forwarding for Docker containers
  enabled: true
  
  # Strategy for handling port conflicts: increment, fail
  # increment: Try same port, then increment (80 -> 8080 -> 8081)
  # fail: Return Docker-compatible error if port unavailable
  conflict_strategy: "increment"
  
  # Interval for monitoring container status
  monitor_interval: "30s"